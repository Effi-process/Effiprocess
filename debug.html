<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Effiprocess Debug</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 20px; 
      background: #f5f5f5; 
    }
    .debug-box { 
      background: white; 
      padding: 20px; 
      margin: 10px 0; 
      border-radius: 8px; 
      box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
    }
    .error { background: #ffe6e6; border-left: 4px solid #f44336; }
    .success { background: #e6f7e6; border-left: 4px solid #4caf50; }
    .info { background: #e6f3ff; border-left: 4px solid #2196f3; }
    pre { 
      background: #f0f0f0; 
      padding: 10px; 
      border-radius: 4px; 
      overflow-x: auto; 
      font-size: 12px; 
    }
    button { 
      background: #a078c8; 
      color: white; 
      border: none; 
      padding: 10px 20px; 
      border-radius: 4px; 
      cursor: pointer; 
      margin: 5px; 
    }
    button:hover { background: #8a5fb0; }
  </style>
</head>
<body>
  <h1>üîç Effiprocess Debug Information</h1>
  
  <div class="debug-box info">
    <h3>1. Basic System Check</h3>
    <div id="systemCheck">Checking...</div>
  </div>

  <div class="debug-box info">
    <h3>2. Main Page Analysis</h3>
    <button onclick="checkMainPage()">Test Main Page Loading</button>
    <div id="mainPageResult">Click button to test</div>
  </div>

  <div class="debug-box info">
    <h3>3. JavaScript Errors</h3>
    <div id="jsErrors">No errors detected yet</div>
  </div>

  <div class="debug-box info">
    <h3>4. Slides Detection</h3>
    <button onclick="loadMainPageScript()">Load and Test Main Script</button>
    <div id="slidesResult">Click button to test</div>
  </div>

  <div class="debug-box info">
    <h3>5. Quick Actions</h3>
    <button onclick="window.open('/', '_blank')">Open Main Page</button>
    <button onclick="window.open('/test.html', '_blank')">Open Test Page</button>
    <button onclick="location.reload()">Refresh Debug</button>
  </div>

  <script>
    // Error tracking
    let jsErrors = [];
    window.addEventListener('error', (e) => {
      jsErrors.push({
        message: e.message,
        filename: e.filename,
        lineno: e.lineno,
        colno: e.colno,
        error: e.error
      });
      updateErrorDisplay();
    });

    function updateErrorDisplay() {
      const errorDiv = document.getElementById('jsErrors');
      if (jsErrors.length === 0) {
        errorDiv.innerHTML = '<div class="success">‚úÖ No JavaScript errors detected</div>';
      } else {
        errorDiv.innerHTML = '<div class="error">‚ùå JavaScript Errors Found:<pre>' + 
          JSON.stringify(jsErrors, null, 2) + '</pre></div>';
      }
    }

    // System Check
    function systemCheck() {
      const checks = {
        'Browser': navigator.userAgent,
        'Screen Size': `${window.innerWidth}x${window.innerHeight}`,
        'Local Storage': typeof(Storage) !== "undefined" ? '‚úÖ Available' : '‚ùå Not available',
        'Fetch API': typeof(fetch) !== "undefined" ? '‚úÖ Available' : '‚ùå Not available',
        'ES6 Support': (() => { try { eval('const test = () => {}'); return '‚úÖ Available'; } catch(e) { return '‚ùå Not available'; }})(),
        'Current URL': window.location.href,
        'Timestamp': new Date().toLocaleString()
      };

      let html = '';
      for (const [key, value] of Object.entries(checks)) {
        html += `<strong>${key}:</strong> ${value}<br>`;
      }
      document.getElementById('systemCheck').innerHTML = html;
    }

    // Test main page
    async function checkMainPage() {
      const resultDiv = document.getElementById('mainPageResult');
      resultDiv.innerHTML = 'Testing main page...';
      
      try {
        const response = await fetch('/');
        const html = await response.text();
        
        // Basic checks
        const checks = {
          'HTTP Status': response.status === 200 ? '‚úÖ 200 OK' : `‚ùå ${response.status}`,
          'HTML Size': `${(html.length / 1024).toFixed(1)} KB`,
          'Contains DOCTYPE': html.includes('<!DOCTYPE html') ? '‚úÖ Yes' : '‚ùå No',
          'Contains app.js': html.includes('app.js') ? '‚úÖ Yes' : '‚ùå No',
          'Contains styles.css': html.includes('styles.css') ? '‚úÖ Yes' : '‚ùå No',
          'Contains slides': html.includes('data-slide=') ? '‚úÖ Yes' : '‚ùå No',
          'Slide Count': (html.match(/data-slide=/g) || []).length
        };

        let html_display = '';
        for (const [key, value] of Object.entries(checks)) {
          html_display += `<strong>${key}:</strong> ${value}<br>`;
        }
        resultDiv.innerHTML = html_display;
        
      } catch (error) {
        resultDiv.innerHTML = `<div class="error">‚ùå Error loading main page: ${error.message}</div>`;
      }
    }

    // Load and test main script
    async function loadMainPageScript() {
      const resultDiv = document.getElementById('slidesResult');
      resultDiv.innerHTML = 'Testing main script...';
      
      try {
        // Try to load the main script
        const response = await fetch('/app.js');
        const script = await response.text();
        
        const checks = {
          'Script HTTP Status': response.status === 200 ? '‚úÖ 200 OK' : `‚ùå ${response.status}`,
          'Script Size': `${(script.length / 1024).toFixed(1)} KB`,
          'Contains goToSlide': script.includes('goToSlide') ? '‚úÖ Yes' : '‚ùå No',
          'Contains refreshSlides': script.includes('refreshSlides') ? '‚úÖ Yes' : '‚ùå No',
          'Contains DOMContentLoaded': script.includes('DOMContentLoaded') ? '‚úÖ Yes' : '‚ùå No',
          'Contains handleContactForm': script.includes('handleContactForm') ? '‚úÖ Yes' : '‚ùå No'
        };

        let html = '';
        for (const [key, value] of Object.entries(checks)) {
          html += `<strong>${key}:</strong> ${value}<br>`;
        }
        resultDiv.innerHTML = html;
        
      } catch (error) {
        resultDiv.innerHTML = `<div class="error">‚ùå Error loading script: ${error.message}</div>`;
      }
    }

    // Run system check on load
    systemCheck();
    updateErrorDisplay();

    console.log('Debug page loaded successfully');
  </script>
</body>
</html>